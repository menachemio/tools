# Microservices project session configuration
name: microservices
timezone: America/New_York
show_utc: true
color: colour202

subsessions:
  auth-service:
    dir: ./services/auth
    command: go run main.go

  api-gateway:
    dir: ./services/gateway
    command: npm run dev
    delay: 5

  user-service:
    dir: ./services/users
    command: npm run dev
    delay: 3

  database:
    dir: ./
    command: docker-compose up -d postgres redis

windows:
  - name: services
    color: colour51
    panes:
      - type: subsession
        subsession: auth-service
      - type: subsession
        subsession: api-gateway
      - type: subsession
        subsession: user-service
      - type: subsession
        subsession: database

  - name: monitoring
    color: colour196
    panes:
      - type: command
        cmd: "watch docker ps"
        execute: true
      - type: command
        cmd: "docker-compose logs -f"
        execute: false
        history: true

  - name: development
    color: colour46
    panes:
      - type: command
        cmd: nvim
        execute: true
      - type: command
        cmd: "git status && git log --oneline -10"
        execute: true
        history: true
